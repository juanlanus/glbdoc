=~=~=~=~=~=~=~=~=~=~=~= PuTTY log 2014.05.20 13:49:44 =~=~=~=~=~=~=~=~=~=~=~=
login as: icdgd
Using keyboard-interactive authentication.
Password: 
Last login: Tue May 20 10:24:33 2014 from 172.16.10.47
Sun Microsystems Inc.   SunOS 5.10      Generic January 2005
You have new mail.
COBJVM=sun_142
JAVA_HOME=/usr/j2se
LD_LIBRARY_PATH=/usr/j2se/jre/lib/sparc:/usr/j2se/jre/lib/sparc/client:/usr/j2se/jre/lib/sparc/native_threads:/usr/j2se/jre/lib/sparc:/opt/mfocus/des/cobol/lib:/opt/IBM/db2/V9.7/lib:/export/home/db2inst1/sqllib/lib64:/export/home/db2inst1/sqllib/lib32
PATH=/usr/j2se/jre/sh:/usr/j2se/sh:/usr/j2se/bin:/usr/j2se/jre/bin:/opt/mfocus/des/cobol/lib:/opt/mfocus/des/cobol/bin:/usr/bin:/bin:/usr/bin:/d/iccol/desarrollo/macros:/d/iccol/desarrollo/utiles:/opt/bin:/usr/sbin:/usr/lib:/usr/ccs/bin:/opt/SUNWspro/bin:/usr/jdk/latest/bin:/usr/local/bin:/usr/j2se/bin:/usr/openwin/bin:.:/export/home/db2inst1/sqllib/bin:/export/home/db2inst1/sqllib/adm:/export/home/db2inst1/sqllib/misc
CLASSPATH=/opt/mfocus/des/cobol/lib/mfcobol.jar:.:/usr/j2se/jre/lib/rt.jar:/opt/mfocus/des/cobol/lib/mfimtk.jar:/opt/mfocus/des/cobol/lib/xerces.jar:/opt/mfocus/des/cobol/lib/castor-0_9_4_1-xml.jar:/opt/mfocus/des/cobol/lib/mfcobol.jar:/usr/j2se/jre/lib/dt.jar:/usr/j2se/jre/lib/rt.jar:/d/iccol/desarrollo/java/server:/export/home/db2inst1/sqllib/java/db2java.zip:/export/home/db2inst1/sqllib/java/db2jcc.jar:/export/home/db2inst1/sqllib/java/sqlj.zip:/export/home/db2inst1/sqllib/function:/export/home/db2inst1/sqllib/java/db2jcc_license_cu.jar:.
COBCPY=/opt/mfocus/des/cobol/cpylib:/opt/mfocus/des/cobol/cpylib:/d/iccol/desarrollo/copys/pais:/d/iccol/desarrollo/copys
Java version = 1.4.2_19
Java vendor = Sun Microsystems Inc.
Java OS name = SunOS
Java OS arch = sparc
Java OS version = 5.10

  ####    ####   #####   ######   ####
 #    #  #    #  #    #  #       #
 #       #    #  #    #  #####    ####
 #       #    #  #    #  #            #
 #    #  #    #  #    #  #       #    #
  ####    ####   #####   ######   ####

 #####
#     #   ####   #        ####   #    #  #####      #      ##
#        #    #  #       #    #  ##  ##  #    #     #     #  #
#        #    #  #       #    #  # ## #  #####      #    #    #
#        #    #  #       #    #  #    #  #    #     #    ######
#     #  #    #  #       #    #  #    #  #    #     #    #    #
 #####    ####   ######   ####   #    #  #####      #    #    #

 #####
#     #   ####   #    #  #####      #    #         ##     ####      #     ####
#        #    #  ##  ##  #    #     #    #        #  #   #    #     #    #    #
#        #    #  # ## #  #    #     #    #       #    #  #          #    #    #
#        #    #  #    #  #####      #    #       ######  #          #    #    #
#     #  #    #  #    #  #          #    #       #    #  #    #     #    #    #
 #####    ####   #    #  #          #    ######  #    #   ####      #     ####

 #####                                           #####  #         ###
#     #  #    #  #    #          #    #         #     # #    #   #   #
#        #    #  ##   #          #    #               # #    #  #     #
 #####   #    #  # #  #          #    #          #####  #    #  #     #
      #  #    #  #  # #          #    #   ###   #       ####### #     #
#     #  #    #  #   ##           #  #    ###   #            #   #   #
 #####    ####   #    # #######    ##     ###   #######      #    ###

icdgd@codes /d/iccol/desarrollo
$ . viset
viset running
/d/iccol/desarrollo>which sj-CARGAJUR
no sj-CARGAJUR in /usr/j2se/jre/sh /usr/j2se/sh /usr/j2se/bin /usr/j2se/jre/bin /opt/mfocus/des/cobol/lib /opt/mfocus/des/cobol/bin /usr/bin /bin /usr/bin /d/iccol/desarrollo/macros /d/iccol/desarrollo/utiles /opt/bin /usr/sbin /usr/lib /usr/ccs/bin /opt/SUNWspro/bin /usr/jdk/latest/bin /usr/local/bin /usr/j2se/bin /usr/openwin/bin . /export/home/db2inst1/sqllib/bin /export/home/db2inst1/sqllib/adm /export/home/db2inst1/sqllib/misc
/d/iccol/desarrollo>^[  /d/iccol/desarrollo>which sj-CARGAJURwhich sh
/d/iccol/desarrollo/macros/sh-CARGAJUR
/d/iccol/desarrollo>vi /d/iccol/desarrollo/macros/sh-CARGAJUR
"/d/iccol/desarrollo/macros/sh-CARGAJUR" 227 lines, 8380 characters #sh-CARGAJUR.v.01.0001
#**********************************************************
#ENTIDAD:DATACREDITO*
#SHELL-ID:     sh-CARGAJUR*
#DATE-WRITTEN: MAY/2014*
#AUTHOR:GLOBANT*
#******************************************************************
#| CQnnnn - CARGA DE ARCHIVO EXTERNO*
# 16-may-2014|*
# Globant.   |*
#|*
#******************************************************************
#
#*========================================================*
#*DEFINICION DE VARIABLES*
#*========================================================*
#
GetFechaSistema()
{
#*-----------------------------------------------------------------------------*
# ACTUALIZA FECHA ACTUAL DEL SISTEMA
#*-----------------------------------------------------------------------------*
    P_SERVER_DEV="172.24.6.154"
    HoraHoy=`date '+%H:%M'`
    FECHOY_A4MMDD=`date '+%Y%m%d'`
    FECHOY_ANOMES=`date '+%Y%m%d' | cut -c 1-6`
    P_FCORTE=$FECHOY_ANOMES
    P_MAQUINA=`who am i | cut -c 39-50`
    echo "MAQUINA: " $P_MAQUINA
    echo "+-------------------------------------------------------------+"
    echo "|     Fecha de Ejecucion    :" $FECHOY_A4MMDD
    echo "|     Hora de Ejecucion     :" $HoraHoy
    echo "|-------------------------------------------------------------+"
}

GetProceso()
{
#*-----------------------------------------------------------------------------*
# PREGUNTA SI EL PROCESO SE REALIZA
#
#*-----------------------------------------------------------------------------*
    P_FCORTE=$FECHOY_ANOMES
    P_PROCESO="#";
    while [ $P_PROCESO != "S" ] && [ $P_PROCESO != "N" ] ; doecho
echo "*--------------------------------------------------------*"echo "     **  DEFINICION DE LA BASE DATOS PARA PROCESO **     "echo "*--------------------------------------------------------*"echo "<S>   Proceso Real""/d/iccol/desarrollo/macros/sh-CARGAJUR" 227 lines, 8380 characters
echo "<N>   Proceso En Falso"echo "<N>   Proceso En Falso"echo "*--------------------------------------------------------*"echo "Digite opcion  (S/N)   ---> \c"read P_PROCESOif [ -z "$P_PROCESO" ] ; thenP_PROCESO="N"else
 if [ $P_PROCESO == "S" ] || [ $P_PROCESO == "s" ] ; thenP_PROCESO="S"else
if [ $P_PROCESO == "N" ] || [ $P_PROCESO == "n" ] ; thenP_PROCESO="N"
else
echo "\n\t*ERRROR* OPCION NO VALIDA! <ENTER>\c"GetEnter
fi
fi
fi
    done
}

GetPeriodoSanata()
{
#*-----------------------------------------------------------------------------*
# PREGUNTAR POR EL PERIODO DEL SANATA Y EFECTUAR EL CAMBIO
#*-----------------------------------------------------------------------------*
    echo "     Digite Fecha de la Base de Datos (AAAAMMDD) a Procesar  ---> \c"
    read FECHIS_ANOMESDIA
    longitud=`echo $FECHIS_ANOMESDIA | tr -d '[:alpha:]' | awk '{printf("%d\n", length($0))}'`
    if [ $longitud -ne 8 ] && [ $longitud -ne 0 ] ; thenecho "\t *ERROR*  Periodo Historico NO válida. La Fecha debe ser (AAAAMMDD) -Proceso cancelado-"
GetEnter
exit
    else
if [ $longitud -eq 0 ] ; thenP_FCORTE=$FECHOY_ANOMESFECHIS_ANOMESDIA=`echo $FECHOY_ANOMES`
else
 cd $DATOS
FECHIS_ANOMES=`echo $FECHIS_ANOMESDIA | cut -c 1-6`sanata=`grep $FECHIS_ANOMES ICSANATA.DAT | cut -f2 -d"/"|cut -f3 -d"_"`cd $TEMPORALES
echo "Sanata para Fecha " $FECHIS_ANOMESDIA "  es " $sanataif test -z "$sanata" ; thenP_FCORTE=$FECHOY_ANOMESecho "\n !!!! *ERROR*  sanata de $FECHIS_ANOMESDIA NO Existe !!! \n "echo "**** PROCESO CANCELADO **** "GetEnter
exitexit
else
 P_FCORTE=$FECHIS_ANOMESCambiarSanatafi
fi
    fi
}

CambiarSanata()
{
#*-----------------------------------------------------------------------------*
# VERIFICAR Y CAMBIAR AL SANATA CORRESPONDIENTE
#*-----------------------------------------------------------------------------*
   if [ $FECHOY_ANOMES -ne $FECHIS_ANOMES ] ; then
echo "\n\tSe Procesa con fecha $FECHIS_ANOMESDIA \n". /san_ata_$sanata/$FECHIS_ANOMES/sh-$FECHIS_ANOMESecho $DATABASEP_FCORTE=$FECHIS_ANOMES
   else
   P_FCORTE=$FECHOY_ANOMES
   fi
}


#* PARAMETROS:
fechab=0;
codsus=0;
nomsus={};
opcion="A";
vector=48;
numeroreg=0;
cadena01={};
cadena02={};
cadena03={};
cadena04={};
cadena05={};
cadena06={};
cadena07={};
cadena08={};
cadena09={};
cadena10={};
cadena11={};
#*========================================================*
#*PROCESO*
#*========================================================*
#*FASE 1: PIDE PARAMETROS*
#*========================================================*
#*-----------------------------------------------------------------------------*
#MENU PRINCIPAL DE EJECUCION#MENU PRINCIPAL DE EJECUCION
#*-----------------------------------------------------------------------------*
clear
GetFechaSistema
GetProceso

loop=0
while [ $loop != 1 ]
 do
echo "     Digite Codigo Suscriptor  ---> \c"
  read codsus
  if [ $codsus -eq 999999 ]
   then
loop=1
  else
cd $DATABASE
   nomsus=`grep ^"$codsus" ICBSUS | cut -c9-48`
   echo "Codigo suscriptor: " $codsus  "   Suscriptor: " $nomsus
   if test -z "$nomsus"
    then
echo "suscriptor errado"
   else
echo "si correcto digite ENTER, si va a modificar digite N  ---> \c"read loopdif test -z "$loopd"
then
loop=1fi
fi
fi
done
echo "     Digite nombre del archivo     ---> \c"
read archivo
cd $TEMPORALES
if test -s $archivo
then
echo
echo "Procesando archivo-----> "$archivo
else
echo "!!!...Archivo $archivo  no existe proceso termina ....!!!"
   echo
echo "(ENTER) Continuar !!!  "
   read xxx
   exit
fi
echo
echo "+-------------------------------------------------------------+"
echo "+-------------------------------------------------------------+"
echo "     Fecha base (AAAAMM)     -----> ($P_FCORTE) "echo "     Fecha base (AAAAMM)     -----> ($P_FCORTE) "
fechab=$P_FCORTE
echo "+-------------------------------------------------------------+"
numeroreg=`wc -l < $archivo`
echo
echo "+-------------------------------------------------------------+"
echo "| Registros iniciales archivo de entrada : " $numeroreg
echo "+-------------------------------------------------------------+"
cadena00=$archivo.orig
cp $archivo $cadena00
echo
#echo "+-------------------------------------------------------------+"
#echo "|SEGUNDA FASE: PROCESO|"
#echo "+-------------------------------------------------------------+"
#*========================================================*
#*  EXECUTE PROGRAM: icestdatVEC-NORMAL*
#*========================================================*
#
echo
echo "+------------------------------------------------------+"
echo "|  Programa CARGAJUR|"
echo "||"
echo "|  Procesando archivo --> "  $archivo
echo "+------------------------------------------------------+"
nohup x CARGAJUR $archivo $P_PROCESO $codsus >| $archivo.log 2>| $archivo.log
echo "+-------------------------------------------------------------+"
echo "|     *********  RESULTADOS DEL PROCESO**********|"
echo "||"
ls -lrt $archivo* >> $archivo.log
tail -20 $archivo.log
echo "+-------------------------------------------------------------+"

~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~:qNo write since last change (:quit! overrides)#sh-CARGAJUR.v.01.0001
#**********************************************************
#ENTIDAD:DATACREDITO*
#SHELL-ID:     sh-CARGAJUR*
#DATE-WRITTEN: MAY/2014*
#AUTHOR:GLOBANT*
#******************************************************************
#| CQnnnn - CARGA DE ARCHIVO EXTERNO*
# 16-may-2014|*
# Globant.   |*
#|*
#******************************************************************
#
#*========================================================*
#*DEFINICION DE VARIABLES*
#*========================================================*
#
GetFechaSistema()
{
#*-----------------------------------------------------------------------------*
# ACTUALIZA FECHA ACTUAL DEL SISTEMA
#*-----------------------------------------------------------------------------*
    P_SERVER_DEV="172.24.6.154"
    HoraHoy=`date '+%H:%M'`
    FECHOY_A4MMDD=`date '+%Y%m%d'`
    FECHOY_ANOMES=`date '+%Y%m%d' | cut -c 1-6`
    P_FCORTE=$FECHOY_ANOMES
    P_MAQUINA=`who am i | cut -c 39-50`
    echo "MAQUINA: " $P_MAQUINA
    echo "+-------------------------------------------------------------+"
    echo "|     Fecha de Ejecucion    :" $FECHOY_A4MMDD
    echo "|     Hora de Ejecucion     :" $HoraHoy
    echo "|-------------------------------------------------------------+"
}

GetProceso()
{
#*-----------------------------------------------------------------------------*
# PREGUNTA SI EL PROCESO SE REALIZA
#
#*-----------------------------------------------------------------------------*
    P_FCORTE=$FECHOY_ANOMES
    P_PROCESO="#";
    while [ $P_PROCESO != "S" ] && [ $P_PROCESO != "N" ] ; doecho
echo "*--------------------------------------------------------*"echo "     **  DEFINICION DE LA BASE DATOS PARA PROCESO **     "echo "*--------------------------------------------------------*"echo "<S>   Proceso Real":q!/d/iccol/desarrollo>cat viset
# Archivo por juan.lanus@globant.com
# instrucciones:
#  1- ejecutar al inicio de la sesiÃ³n con "punto", asi:
#     . viset
#  2- efectos:
#     -establece la variable de entorno EXINIT (solamente mientras dure la sesioon
#      con algunas opciones de conveniencia para el editor vi
#     -algunas de las opciones, (casi) todas las "map", no funcionan todavia
#     -ejecuta el comando sh-cambamb prunovedat
#     -escribe "viset running"
#

# si falta el "." al comienzo del comando escribe un banner y termina
if [ `echo $0` != "-ksh" ]
then
  banner "falta el ."
else
  echo viset running
  # establece opciones de vi
  EXINIT="set ignorecase nowrapscan showmode showmatch tabstop=4 shiftwidth=4 | map ^? ^H | map ^[[4~ $ | map ^[[1~ 0 | map ^[[6~ ^F^F | map ^[[5~ ^B^B "
  export EXINIT
  # setea el ambiente de desarrollo
  . sh-camamb prunovedat
  # Achica el prompt a solo el directorio actual (OK mientras no cambio
  # de mÃ¡quina o de usuario):
  export PS1='${PWD}>'
fi
/d/iccol/desarrollo>vi viset
"viset" 27 lines, 983 characters # Archivo por juan.lanus@globant.com
# instrucciones:
#  1- ejecutar al inicio de la sesiÃ³n con "punto", asi:
#     . viset
#  2- efectos:
#     -establece la variable de entorno EXINIT (solamente mientras dure la sesioon
#con algunas opciones de conveniencia para el editor vi
#     -algunas de las opciones, (casi) todas las "map", no funcionan todavia
#     -ejecuta el comando sh-cambamb prunovedat
#     -escribe "viset running"
#

# si falta el "." al comienzo del comando escribe un banner y termina
if [ `echo $0` != "-ksh" ]
then
banner "falta el ."
else
echo viset running
  # establece opciones de vi
  EXINIT="set ignorecase nowrapscan showmode showmatch tabstop=4 shiftwidth=4 | map ^? ^H | map ^[[4~ $ |
map ^[[1~ 0 | map ^[[6~ ^F^F | map ^[[5~ ^B^B "
  export EXINIT
  # setea el ambiente de desarrollo
  . sh-camamb prunovedat
  # Achica el prompt a solo el directorio actual (OK mientras no cambio
  # de mÃ¡quina o de usuario):
  export PS1='${PWD}>'
fi
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~"viset" 27 lines, 983 characters

la sesiÃ$CHANGE MODEó



sesioREPLACE 1 CHARó

aAPPEND MODE, y 
APPEND MODE#      si alguien sabe cómo escribirlas correctamente se aceptan aportesmÃ$CHANGE MODEá:w"viset" 28 lines, 1057 characters :e"viset" 28 lines, 1057 characters # Archivo por juan.lanus@globant.com
# instrucciones:
#  1- ejecutar al inicio de la sesión con "punto", asi:
#     . viset
#  2- efectos:
#     -establece la variable de entorno EXINIT (solamente mientras dure la sesión
#con algunas opciones de conveniencia para el editor vi
#     -algunas de las opciones, (casi) todas las "map", no funcionan todavia, y
#si alguien sabe cómo escribirlas correctamente se aceptan aportes
#     -ejecuta el comando sh-cambamb prunovedat
#     -escribe "viset running"
#

# si falta el "." al comienzo del comando escribe un banner y termina
if [ `echo $0` != "-ksh" ]
then
banner "falta el ."
else
echo viset running
  # establece opciones de vi
  EXINIT="set ignorecase nowrapscan showmode showmatch tabstop=4 shiftwidth=4 | map ^? ^H | map ^[[4~ $ |
map ^[[1~ 0 | map ^[[6~ ^F^F | map ^[[5~ ^B^B "
  export EXINIT
  # setea el ambiente de desarrollo
  . sh-camamb prunovedat
  # Achica el prompt a solo el directorio actual (OK mientras no cambio
  # de máquina o de usuario):
  export PS1='${PWD}>'
fi
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~"viset" 28 lines, 1057 characters:q/d/iccol/desarrollo>. viset
viset running
ERROR:  Directorio (/d/iccol/desarrollo/database/prunovedat/prunovedat) para nuevo ambiente no existe
/d/iccol/desarrollo>te
/d/iccol/desarrollo/temporales>^[  /d/iccol/desarrollo/temporales>te. visetvi visetcat visetvi /d/iccol/desarrollo/macros/sh-CARGAJUR/d/iccol/desarrollo/temporales>vi /d/iccol/desarrollo/macros/sh-CARGAJUR2
"/d/iccol/desarrollo/macros/sh-CARGAJUR2" [New file] 
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~"/d/iccol/desarrollo/macros/sh-CARGAJUR2" [New file]:r /d/iccol/desarrollo/macros/sh-CARGAJUR"/d/iccol/desarrollo/macros/sh-CARGAJUR" 227 lines, 8380 characters 
#sh-CARGAJUR.v.01.0001
#**********************************************************
#ENTIDAD:DATACREDITO*
#SHELL-ID:     sh-CARGAJUR*
#DATE-WRITTEN: MAY/2014*
#AUTHOR:GLOBANT*
#******************************************************************
#| CQnnnn - CARGA DE ARCHIVO EXTERNO*
# 16-may-2014|*
# Globant.   |*
#|*
#******************************************************************
#
#*========================================================*
#*DEFINICION DE VARIABLES*
#*========================================================*
#
GetFechaSistema()
{
#*-----------------------------------------------------------------------------*
# ACTUALIZA FECHA ACTUAL DEL SISTEMA
#*-----------------------------------------------------------------------------*
    P_SERVER_DEV="172.24.6.154"
    HoraHoy=`date '+%H:%M'`
    FECHOY_A4MMDD=`date '+%Y%m%d'`
    FECHOY_ANOMES=`date '+%Y%m%d' | cut -c 1-6`
    P_FCORTE=$FECHOY_ANOMES
    P_MAQUINA=`who am i | cut -c 39-50`
    echo "MAQUINA: " $P_MAQUINA
    echo "+-------------------------------------------------------------+"
    echo "|     Fecha de Ejecucion    :" $FECHOY_A4MMDD
    echo "|     Hora de Ejecucion     :" $HoraHoy
    echo "|-------------------------------------------------------------+"
}

GetProceso()
{
#*-----------------------------------------------------------------------------*
# PREGUNTA SI EL PROCESO SE REALIZA
#
#*-----------------------------------------------------------------------------*
    P_FCORTE=$FECHOY_ANOMES
    P_PROCESO="#";
    while [ $P_PROCESO != "S" ] && [ $P_PROCESO != "N" ] ; doecho
echo "*--------------------------------------------------------*"echo "     **  DEFINICION DE LA BASE DATOS PARA PROCESO **     "echo "*--------------------------------------------------------*"
echo "<S>   Proceso Real""/d/iccol/desarrollo/macros/sh-CARGAJUR2" [Modified] line 1 of 227 --0%-- cadena00=$archivo.orig
cp $archivo $cadena00
echo
#echo "+-------------------------------------------------------------+"
#echo "|SEGUNDA FASE: PROCESO|"
#echo "+-------------------------------------------------------------+"
#*========================================================*
#*  EXECUTE PROGRAM: icestdatVEC-NORMAL*
#*========================================================*
#
echo
echo "+------------------------------------------------------+"
echo "|  Programa CARGAJUR|"
echo "||"
echo "|  Procesando archivo --> "  $archivo
echo "+------------------------------------------------------+"
nohup x CARGAJUR $archivo $P_PROCESO $codsus >| $archivo.log 2>| $archivo.log
echo "+-------------------------------------------------------------+"
echo "|     *********  RESULTADOS DEL PROCESO**********|"
echo "||"
ls -lrt $archivo* >> $archivo.log
tail -20 $archivo.log
echo "+-------------------------------------------------------------+"

~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~RGAJUgAPPEND MODEnohup RAPPEND MODE2
#sh-CARGAJUR.v.01.0001
#**********************************************************
#ENTIDAD:DATACREDITO*
#SHELL-ID:     sh-CARGAJUR*
#DATE-WRITTEN: MAY/2014*
#AUTHOR:GLOBANT*
#******************************************************************
#| CQnnnn - CARGA DE ARCHIVO EXTERNO*
# 16-may-2014|*
# Globant.   |*
#|*
#******************************************************************
#
#*========================================================*
#*DEFINICION DE VARIABLES*
#*========================================================*
#
GetFechaSistema()
{
#*-----------------------------------------------------------------------------*
# ACTUALIZA FECHA ACTUAL DEL SISTEMA
#*-----------------------------------------------------------------------------*
    P_SERVER_DEV="172.24.6.154"
    HoraHoy=`date '+%H:%M'`
    FECHOY_A4MMDD=`date '+%Y%m%d'`
    FECHOY_ANOMES=`date '+%Y%m%d' | cut -c 1-6`
    P_FCORTE=$FECHOY_ANOMES
    P_MAQUINA=`who am i | cut -c 39-50`
    echo "MAQUINA: " $P_MAQUINA
    echo "+-------------------------------------------------------------+"
    echo "|     Fecha de Ejecucion    :" $FECHOY_A4MMDD
    echo "|     Hora de Ejecucion     :" $HoraHoy
    echo "|-------------------------------------------------------------+"
}

GetProceso()
{
#*-----------------------------------------------------------------------------*
# PREGUNTA SI EL PROCESO SE REALIZA
#
#*-----------------------------------------------------------------------------*
    P_FCORTE=$FECHOY_ANOMES
    P_PROCESO="#";
    while [ $P_PROCESO != "S" ] && [ $P_PROCESO != "N" ] ; doecho
echo "*--------------------------------------------------------*"echo "     **  DEFINICION DE LA BASE DATOS PARA PROCESO **     "echo "*--------------------------------------------------------*"echo "<S>   Proceso Real""/d/iccol/desarrollo/macros/sh-CARGAJUR2" [Modified] line 1 of 227 --0%-- :w"/d/iccol/desarrollo/macros/sh-CARGAJUR2" [New file] 227 lines, 8381 characters :q/d/iccol/desarrollo/temporales>te
/d/iccol/desarrollo/temporales>sh-CARGAJUR2
ksh: sh-CARGAJUR2: cannot execute
/d/iccol/desarrollo/temporales>chmod +x sh-CARJ GAJUR2
chmod: WARNING: can't access sh-CARGAJUR2
/d/iccol/desarrollo/temporales>^[  /d/iccol/desarrollo/temporales>chmod +x sh-CARGAJUR2 sh-CARGAJUR2        w sh-CARGAJUR2h sh-CARGAJUR2i sh-CARGAJUR2c sh-CARGAJUR2h sh-CARGAJUR2
no sh-CARGAJUR2 in /usr/j2se/jre/sh /usr/j2se/sh /usr/j2se/bin /usr/j2se/jre/bin /opt/mfocus/des/cobol/lib /opt/mfocus/des/cobol/bin /usr/bin /bin /usr/bin /d/iccol/desarrollo/macros /d/iccol/desarrollo/utiles /opt/bin /usr/sbin /usr/lib /usr/ccs/bin /opt/SUNWspro/bin /usr/jdk/latest/bin /usr/local/bin /usr/j2se/bin /usr/openwin/bin . /export/home/db2inst1/sqllib/bin /export/home/db2inst1/sqllib/adm /export/home/db2inst1/sqllib/misc
/d/iccol/desarrollo/temporales>pwd
/d/iccol/desarrollo/temporales
/d/iccol/desarrollo/temporales>ll sh     sh-*
sh-*: No such file or directory
/d/iccol/desarrollo/temporales>cd  fu
/d/iccol/desarrollo/fuentes>^[  /d/iccol/desarrollo/fuentes>ful sh-*
-rw-rw-r--   1 icfacd   icdatacr     115 May 29  2003 sh-amplia-bdi
-rwxrwxr--   1 227      icdatacr    1141 May 30  2003 sh-c-v-bdi
-rwxrwxr-x   1 icjdld   icdatacr   11199 Oct 30  2012 sh-cataloga-Reco
-rwxrwxr-x   1 iccavd   icdatacr     140 Feb 23  2012 sh-comp-certif
-rw-rw-r--   1 1395     icdatacr   13646 Sep  9  2010 sh-compila-BDLDI2-PE.log
-rwxrwxr-x   1 227      icdatacr      94 Feb 22  2002 sh-driver
-rw-r--r--   1 icjaad   icdatacr   13288 Mar 30  2012 sh-LOAD-DB-ICMCRE.btq
-rw-r--r--   1 icjaad   icdatacr    5849 Mar 28  2012 sh-LOAD-TMP-ICBCHK.fld
-rw-r--r--   1 icjaad   icdatacr   12334 Mar 28  2012 sh-LOAD-TMP-ICBCLA.fld
-rw-r--r--   1 icjaad   icdatacr    7501 Mar 27  2012 sh-LOAD-TMP-ICMCLN.fld
-rwxrwxr-x   1 icjaad   icdatacr     328 Feb 14  2013 sh-mkt
-rw-rw-r--   1 icgjcd   icdatacr   31230 May  6  2005 sh-novedatgj
-rwxrwxr-x   1 icjdld   icdatacr     540 Oct 30  2012 sh-otro-md5
-rw-rw-r--   1 iccavd   icdatacr    8518 May  4  2009 sh-recompila-intel-20090504
-rw-rw-r--   1 iccavd   icdatacr   10703 May  4  2009 sh-recompila-intel-especiales
-rw-rw-r--   1 iccavd   icdatacr    1979 May  4  2009 sh-recompila-linea-20090504
-rwxrwxr-x   1 227      icdatacr      94 Feb 22  2002 sh-test1
-rwxrwxr-x   1 227      icdatacr      94 Feb 22  2002 sh-test2
-rwxrwxr-x   1 227      icdatacr      95 Feb 26  2002 sh-test3
-rwxrwxrwx   1 227      icdatacr      93 Jan 16  2002 sh-tmp
/d/iccol/desarrollo/fuentes>te
/d/iccol/desarrollo/temporales>^[  /d/iccol/desarrollo/temporales>tel sh-*fu    l sh-*pwd   which sh-CARGAJUR2chmod +x sh-CARGAJUR2sh-CARGAJUR2         te          vi /d/iccol/desarrollo/macros/sh-CARGAJUR2/d/iccol/desarrollo/temporales> /d/iccol/desarrollo/macros/sh-CARGAJUR2  /d/iccol/desarrollo/temporales>c /d/iccol/desarrollo/macros/sh-CARGAJUR2/d/iccol/desarrollo/temporales>ch /d/iccol/desarrollo/macros/sh-CARGAJUR2/d/iccol/desarrollo/temporales>chm /d/iccol/desarrollo/macros/sh-CARGAJUR2/d/iccol/desarrollo/temporales>chmo /d/iccol/desarrollo/macros/sh-CARGAJUR2/d/iccol/desarrollo/temporales>chmod /d/iccol/desarrollo/macros/sh-CARGAJUR2/d/iccol/desarrollo/temporales>chmod  /d/iccol/desarrollo/macros/sh-CARGAJUR2/d/iccol/desarrollo/temporales>chmod + /d/iccol/desarrollo/macros/sh-CARGAJUR>/d/iccol/desarrollo/temporales>chmod +x /d/iccol/desarrollo/macros/sh-CARGAJU
/d/iccol/desarrollo/temporales>^[  /d/iccol/desarrollo/temporales>chmod +x /d/iccol/desarrollo/macros/sh-CARGAJU>/d/iccol/desarrollo/temporales>te                                             /d/iccol/desarrollo/temporales>l sh-*fu    l sh-*pwd   which sh-CARGAJUR2chmod +x sh-CARGAJUR2sh-CARGAJUR2         
MAQUINA:  172.16.10.50
+-------------------------------------------------------------+
|     Fecha de Ejecucion    :       20140520
|     Hora de Ejecucion     :       12:19
|-------------------------------------------------------------+

*--------------------------------------------------------*
     **  DEFINICION DE LA BASE DATOS PARA PROCESO **     
*--------------------------------------------------------*
           <S>   Proceso Real                   
           <N>   Proceso En Falso               
*--------------------------------------------------------*
       Digite opcion  (S/N)   ---> S N
     Digite Codigo Suscriptor  ---> 999999
     Digite nombre del archivo     ---> CARGAJUR2         9999991000905140104.txt

Procesando archivo-----> 9999991000905140104.txt

+-------------------------------------------------------------+
+-------------------------------------------------------------+
     Fecha base (AAAAMM)     -----> (201405) 
+-------------------------------------------------------------+

+-------------------------------------------------------------+
| Registros iniciales archivo de entrada :  28
+-------------------------------------------------------------+


+------------------------------------------------------+
|  Programa CARGAJUR                                   |
|                                                      |
|  Procesando archivo -->  9999991000905140104.txt
+------------------------------------------------------+
+-------------------------------------------------------------+
|     *********  RESULTADOS DEL PROCESO       **********      |
|                                                             |
         Alertas insertadas
         Alertas modificadas
         Alertas eliminadas
      20 Insercion de alerta existente
         Modif o elim de alerta inexistente
 
Totales por tipo de error detectado:
       1 07-Numero de demandas terminadas: debe ser numerico           
       5 09-Fecha ultima demanda vigente YYYYMMDD: fuera de rango      
       1 11-Numero de embargos terminados: debe ser numerico           
       4 13-Fecha ultimo embargo vigente YYYYMMDD: fuera de rango      
       4 14-El numero de id no se encuentra en el archivo maestro      
       2 15-El nombre en el input no coincide con el registrado        

Inicio de Programa:  2014/05/20 12:24:00
Fin de Programa:     2014/05/20 12:24:01

-rw-rw-r--   1 icdgd    icdatacr    2436 May 19 15:46 9999991000905140104.txt
-rw-rw-r--   1 icdgd    icdatacr    2436 May 20 12:24 9999991000905140104.txt.orig
-rw-rw-r--   1 icdgd    icdatacr   11032 May 20 12:24 9999991000905140104.txt.log
+-------------------------------------------------------------+
/d/iccol/desarrollo/temporales>
/d/iccol/desarrollo/temporales>fg
ksh: fg: no such job
/d/iccol/desarrollo/temporales>^[  /d/iccol/desarrollo/temporales>fgsh-CARGAJUR2chmod +x /d/iccol/desarrollo/macros/sh-CARGAJU>/d/iccol/desarrollo/temporales>te                                             /d/iccol/desarrollo/temporales>l sh-*fu      
/d/iccol/desarrollo/temporales>l *log
-rw-rw-r--   1 icdgd    icdatacr    5151 May 19 11:17 9999991000905140101.txt.log
-rw-rw-r--   1 icdgd    icdatacr   11275 May 20 12:24 9999991000905140104.txt.log
-rw-rw-r--   1 icrmbd   icdatacr   74750 May 20 08:57 ccierr.log
-rw-rw-r--   1 icfard   icdatacr    1954 May 20 10:00 CQ12837P1.log
-rw-rw-r--   1 icjcld   icdatacr    1706 May 20 00:09 JUR00800153993_201310.log
-rw-rw-r--   1 icjcld   icdatacr    1706 May 20 00:09 JUR00830037330_201310.log
-rw-rw-r--   1 icjcld   icdatacr    1706 May 20 00:09 JUR00830114921_201310.log
-rw-rw-r--   1 icjcld   icdatacr     577 May 20 00:09 JUR99999999999_201310.log
-rw-rw-r--   1 icjcld   icdatacr   11662 May 20 00:05 NAT00800153993_201310.log
-rw-rw-r--   1 icjcld   icdatacr    5118 May 20 00:05 NAT00830037330_201310.log
-rw-rw-r--   1 icjcld   icdatacr    5118 May 20 00:05 NAT00830114921_201310.log
-rw-rw-r--   1 icjcld   icdatacr    9186 May 20 00:05 NAT99999999999_201310.log
-rw-rw-r--   1 icdgd    icdatacr     676 May 19 16:05 prueba.log
-rw-rw-r--   1 icjcld   icdatacr    1706 May 20 00:11 TOT00800153993_201310.log
-rw-rw-r--   1 icjcld   icdatacr    1706 May 20 00:11 TOT00830037330_201310.log
-rw-rw-r--   1 icjcld   icdatacr    1706 May 20 00:11 TOT00830114921_201310.log
-rw-rw-r--   1 icjcld   icdatacr    1066 May 20 00:11 TOT99999999999_201310.log
/d/iccol/desarrollo/temporales>cat  9999991000905140104.txt.log

real        0.0
user        0.0
sys         0.0
                                           
CARGAJUR   Carga de archivo JURAD - proceso en falso
04 Refresque Total - Carga TOTAL
Fecha de proceso: 20140104
 
I100000149123JOSE MISAEL AREVALO SANCHEZ                  0010012013040500905720130411
Error 14 El numero de id no se encuentra en el archivo maestro      
 
I100000262135LIBARDO ANTONIO GARZON TORRE                 0150202013020602204520120406
Error 14 El numero de id no se encuentra en el archivo maestro      
 
I100000958212LUIS GUILLERMO AVENDAÑO RODR                 0020442013050603302020000406
Error 14 El numero de id no se encuentra en el archivo maestro      
 
I100001327130GONZALO PATIÑO MORENO                        0030062013010604407619984069
Error 13 Fecha ultimo embargo vigente YYYYMMDD: fuera de rango      
4333-LEER-BDIIALE-RANDOM k:100002249789999999000J001     fs:00
Insercion de alerta nueva que ya existe  key: 100002249789999999000J001    
Registro de input: 
I100002249789JOAQUIN VARGAS CABALLERO                     0040032012040601104320440406
Datos en la alerta: 000040000320201204
4300-MODIFICAR-BDIIALE-I k:100002249789999999000J001     fs:00
4333-LEER-BDIIALE-RANDOM k:100002249789999999000J002     fs:00
Insercion de alerta nueva que ya existe  key: 100002249789999999000J002    
Registro de input: 
I100002249789JOAQUIN VARGAS CABALLERO                     0040032012040601104320440406
Datos en la alerta: 000110004320204404
4300-MODIFICAR-BDIIALE-I k:100002249789999999000J002     fs:00
 
I100002859753ERNESTO RICO                                 0050672013040602206720100435
Error 13 Fecha ultimo embargo vigente YYYYMMDD: fuera de rango      
 
I100002865767MIGUEL ANTONIO LAVERDE NIETO                 0060452011040603303320111406
Error 13 Fecha ultimo embargo vigente YYYYMMDD: fuera de rango      
 
I100003044362MANUEL CASTRO MUÑETON                        0070rt2011010605300120130406
Error 07 Numero de demandas terminadas: debe ser numerico           
4333-LEER-BDIIALE-RANDOM k:100003295380999999000J001     fs:00
Insercion de alerta nueva que ya existe  key: 100003295380999999000J001    
Registro de input: 
I100003295380HENRY REY BARBOSA                            0080452013011123200220110506
Datos en la alerta: 000080004520201301
4300-MODIFICAR-BDIIALE-I k:100003295380999999000J001     fs:00
4333-LEER-BDIIALE-RANDOM k:100003295380999999000J002     fs:00
Insercion de alerta nueva que ya existe  key: 100003295380999999000J002    
Registro de input: 
I100003295380HENRY REY BARBOSA                            0080452013011123200220110506
Datos en la alerta: 002320000220201105
4300-MODIFICAR-BDIIALE-I k:100003295380999999000J002     fs:00
 
I100003448867JAIRO DE JESUS HENAO VILLEGA                 0090572013041104550030100806
Error 13 Fecha ultimo embargo vigente YYYYMMDD: fuera de rango      
4333-LEER-BDIIALE-RANDOM k:200800002194999999000J001     fs:00
Insercion de alerta nueva que ya existe  key: 200800002194999999000J001    
Registro de input: 
I200800002194SERVICULTIVOS LTDA                           0220452012040603404520120406
Datos en la alerta: 000220004520201204
4300-MODIFICAR-BDIIALE-I k:200800002194999999000J001     fs:00
4333-LEER-BDIIALE-RANDOM k:200800002194999999000J002     fs:00
Insercion de alerta nueva que ya existe  key: 200800002194999999000J002    
Registro de input: 
I200800002194SERVICULTIVOS LTDA                           0220452012040603404520120406
Datos en la alerta: 000340004520201204
4300-MODIFICAR-BDIIALE-I k:200800002194999999000J002     fs:00
4333-LEER-BDIIALE-RANDOM k:200800178009999999000J001     fs:00
Insercion de alerta nueva que ya existe  key: 200800178009999999000J001    
Registro de input: 
I200800178009CALZADO ORION DEL LITORAL                    0330202000040601505420140106
Datos en la alerta: 000330002020200004
4300-MODIFICAR-BDIIALE-I k:200800178009999999000J001     fs:00
4333-LEER-BDIIALE-RANDOM k:200800178009999999000J002     fs:00
Insercion de alerta nueva que ya existe  key: 200800178009999999000J002    
Registro de input: 
I200800178009CALZADO ORION DEL LITORAL                    0330202000040601505420140106
Datos en la alerta: 000150005420201401
4300-MODIFICAR-BDIIALE-I k:200800178009999999000J002     fs:00
 
I200811046741SALUD AXIAL LTDA                             0440761998406903400219990101
Error 09 Fecha ultima demanda vigente YYYYMMDD: fuera de rango      
4333-LEER-BDIIALE-RANDOM k:200830067928999999000J001     fs:00
Insercion de alerta nueva que ya existe  key: 200830067928999999000J001    
Registro de input: 
I200830067928C I GLOMA S A                                0110432044040601203220100406
Datos en la alerta: 000110004320204404
4300-MODIFICAR-BDIIALE-I k:200830067928999999000J001     fs:00
4333-LEER-BDIIALE-RANDOM k:200830067928999999000J002     fs:00
Insercion de alerta nueva que ya existe  key: 200830067928999999000J002    
Registro de input: 
I200830067928C I GLOMA S A                                0110432044040601203220100406
Datos en la alerta: 000120003220201004
4300-MODIFICAR-BDIIALE-I k:200830067928999999000J002     fs:00
 
I200860013816INSTITUTO DE SEGUROS SOCIALE                 0220672010043503300220131206
Error 09 Fecha ultima demanda vigente YYYYMMDD: fuera de rango      
 
I200860024151COMPUTEC SA                                  0330332011140604500120110402
Error 09 Fecha ultima demanda vigente YYYYMMDD: fuera de rango      
 
I200860034313BANCO DAVIVIENDA SA                          0533000013040601102320110411
Error 09 Fecha ultima demanda vigente YYYYMMDD: fuera de rango      
 
I200890300546COLGATE PALMOLIVE COMPAIA                    2322000011050603304320131010
Error 09 Fecha ultima demanda vigente YYYYMMDD: fuera de rango      
4333-LEER-BDIIALE-RANDOM k:200890934264999999000J001     fs:00
Insercion de alerta nueva que ya existe  key: 200890934264999999000J001    
Registro de input: 
I200890934264SUBSUELO Y GEOTECNIA LTDA                    0450002010080600204420130506
Datos en la alerta: 000450000020201008
4300-MODIFICAR-BDIIALE-I k:200890934264999999000J001     fs:00
4333-LEER-BDIIALE-RANDOM k:200890934264999999000J002     fs:00
Insercion de alerta nueva que ya existe  key: 200890934264999999000J002    
Registro de input: 
I200890934264SUBSUELO Y GEOTECNIA LTDA                    0450002010080600204420130506
Datos en la alerta: 000020004420201305
4300-MODIFICAR-BDIIALE-I k:200890934264999999000J002     fs:00
4333-LEER-BDIIALE-RANDOM k:200890107487999999000J001     fs:00
Insercion de alerta nueva que ya existe  key: 200890107487999999000J001    
Registro de input: 
I200890107487SUPERTIENDAS Y DROGUERIAS OL                 0340452012040600300620130106
Datos en la alerta: 000340004520201204
4300-MODIFICAR-BDIIALE-I k:200890107487999999000J001     fs:00
4333-LEER-BDIIALE-RANDOM k:200890107487999999000J002     fs:00
Insercion de alerta nueva que ya existe  key: 200890107487999999000J002    
Registro de input: 
I200890107487SUPERTIENDAS Y DROGUERIAS OL                 0340452012040600300620130106
Datos en la alerta: 000030000620201301
4300-MODIFICAR-BDIIALE-I k:200890107487999999000J002     fs:00
 
I300600003115xxxxxx                                       0150542014010600400320120406
Error 15 El nombre en el input no coincide con el registrado        
novedad:  xxxxxx                                       
registro: FERNANDEZ PENA JULIO ANTONIO                                     
4333-LEER-BDIIALE-RANDOM k:300611000446999999000J001     fs:00
Insercion de alerta nueva que ya existe  key: 300611000446999999000J001    
Registro de input: 
I300611000446ANTONIO CONDOLUCI DOMINGO                    0340021999010100506720130406
Datos en la alerta: 000340000220199901
4300-MODIFICAR-BDIIALE-I k:300611000446999999000J001     fs:00
4333-LEER-BDIIALE-RANDOM k:300611000446999999000J002     fs:00
Insercion de alerta nueva que ya existe  key: 300611000446999999000J002    
Registro de input: 
I300611000446ANTONIO CONDOLUCI DOMINGO                    0340021999010100506720130406
Datos en la alerta: 000050006720201304
4300-MODIFICAR-BDIIALE-I k:300611000446999999000J002     fs:00
4333-LEER-BDIIALE-RANDOM k:400000163597999999000J001     fs:00
Insercion de alerta nueva que ya existe  key: 400000163597999999000J001    
Registro de input: 
I400000163597MARWA MIKHAEL SKAFF DE KARAA                 0120322010040600604520110406
Datos en la alerta: 000120003220201004
4300-MODIFICAR-BDIIALE-I k:400000163597999999000J001     fs:00
4333-LEER-BDIIALE-RANDOM k:400000163597999999000J002     fs:00
Insercion de alerta nueva que ya existe  key: 400000163597999999000J002    
Registro de input: 
I400000163597MARWA MIKHAEL SKAFF DE KARAA                 0120322010040600604520110406
Datos en la alerta: 000060004520201104
4300-MODIFICAR-BDIIALE-I k:400000163597999999000J002     fs:00
 
I400000266423SIMONE MARTINEZ                              033002201312060070rt20110106
Error 11 Numero de embargos terminados: debe ser numerico           
 
I400000244359PATRICIO ALEJANDRO HERRERA C                 0450012011040200804520130111
Error 14 El numero de id no se encuentra en el archivo maestro      
4333-LEER-BDIIALE-RANDOM k:400000136711999999000J001     fs:00
Insercion de alerta nueva que ya existe  key: 400000136711999999000J001    
Registro de input: 
I400000136711ARIAS NILO RIESCO                            0110232011041100905720130411
Datos en la alerta: 000110002320201104
4300-MODIFICAR-BDIIALE-I k:400000136711999999000J001     fs:00
4333-LEER-BDIIALE-RANDOM k:400000136711999999000J002     fs:00
Insercion de alerta nueva que ya existe  key: 400000136711999999000J002    
Registro de input: 
I400000136711ARIAS NILO RIESCO                            0110232011041100905720130411
Datos en la alerta: 000090005720201304
4300-MODIFICAR-BDIIALE-I k:400000136711999999000J002     fs:00
 
I400000163598xxxxxx                                       0330432013101002204520120406
Error 15 El nombre en el input no coincide con el registrado        
novedad:  xxxxxx                                       
registro: KARAN  ABBOUD NAJAH                                              
 
Totales de registros:
      27 Registros IME en el archivo de entrada
      10 Registros procesados sin error
      17 Registros con error
         Alertas borradas previo al refresque total
         Alertas insertadas
         Alertas modificadas
         Alertas eliminadas
      20 Insercion de alerta existente
         Modif o elim de alerta inexistente
 
Totales por tipo de error detectado:
       1 07-Numero de demandas terminadas: debe ser numerico           
       5 09-Fecha ultima demanda vigente YYYYMMDD: fuera de rango      
       1 11-Numero de embargos terminados: debe ser numerico           
       4 13-Fecha ultimo embargo vigente YYYYMMDD: fuera de rango      
       4 14-El numero de id no se encuentra en el archivo maestro      
       2 15-El nombre en el input no coincide con el registrado        

Inicio de Programa:  2014/05/20 12:24:00
Fin de Programa:     2014/05/20 12:24:01

-rw-rw-r--   1 icdgd    icdatacr    2436 May 19 15:46 9999991000905140104.txt
-rw-rw-r--   1 icdgd    icdatacr    2436 May 20 12:24 9999991000905140104.txt.orig
-rw-rw-r--   1 icdgd    icdatacr   11032 May 20 12:24 9999991000905140104.txt.log
/d/iccol/desarrollo/temporales>
shell will timeout in 60 seconds due to inactivity
ksh: timed out waiting for input
